<!-- This code displays making an Ajax request using the onreadystatechange() method. -->
<!-- This method is used to grab the full information about the AJAX connection states.  -->
<!-- The states include -  -->
<!-- 0: request not initialized
1: server connection established
2: request received
3: processing request
4: request finished and response is ready -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax - fetching a text file</title>
</head>
<body>
   <button id="button">Get Text File</button>
   <br>
   <p id="para"></p>

   <script>
    const button = document.getElementById("button");
    const para = document.getElementById("para");

    button.addEventListener("click", getFile);

    function getFile() {
        const xhr = new XMLHttpRequest();
        console.log(xhr.readyState);
        xhr.open('GET', 'sample.txt', true);
        console.log(xhr.readyState);

        xhr.onreadystatechange = function() {
        console.log(xhr.readyState);
            if (this.readyState == 4 && this.status == 200) {
                para.innerHTML = this.responseText;
            }
        }
        // function to handle errors
        xhr.onerror = function() {
            para.innerHTML = "An Error has occured"
        }
        // sending the request
        xhr.send();
    }
   </script>
</body>
</html>